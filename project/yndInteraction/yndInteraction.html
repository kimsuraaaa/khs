<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>YANADOO</title>
    <link rel="stylesheet" href="yndInteraction.css" />
  </head>
  <body>
    <div id="root">
      <section class="motion-screen type-fixed" id="intro">
        <div class="fixed-area">
          <img
            src="image/logo_ynd_136x38.png"
            alt="야나두"
            class="intro-logo"
          />
          <div class="slogan-box">
            <img src="image/img_title_01.png" alt="야" class="slogan-01" />
            <img src="image/img_title_02.png" alt="너두" class="slogan-02" />
            <img
              src="image/img_title_03.png"
              alt="할수있어"
              class="slogan-03"
            />
          </div>
        </div>
      </section>
      <section class="motion-screen" id="english">
        <div class="scroll-motion-box" id="neverGiveUp">
          <h2 id="neverGiveUpTitle" class="one-time">
            <img
              src="image/img_nevergiveup_title.png"
              alt="150만 회원 돌파 기념 78% 할인"
            />
          </h2>
          <div id="neverGiveUpHenry" class="one-time"></div>
        </div>
        <div class="scroll-motion-box" id="milchak">
          <h2 id="milchakTitle">90일에 끝내는 초밀착개인과외</h2>
          <div id="milchakHenry"></div>
        </div>
        <div class="scroll-motion-box" id="audio">
          <div class="audio-price-col">
            <dl>
              <dt id="audioImg">
                <img src="image/img_audio.png" alt="" />
              </dt>
              <dd id="audioEffectBg">
                <span class="motion-effect-1"></span>
                <span class="motion-effect-2"></span>
              </dd>
            </dl>
          </div>
        </div>
        <div class="scroll-motion-box" id="cheerupBox">
          <h2 id="cheerupTitle">야 너도 기부 할수있어</h2>
          <div id="cheerupBg"></div>
        </div>
      </section>
      <section class="motion-screen" id="yafit">
        <div class="intro-cover"></div>
        <div class="fixed-area">
          <div class="scale-screen" id="scaleScreen">
            <ul>
              <li class="step-active">
                <div class="yafit-intro"></div>
                <div class="yafit-intro-title">
                  <img src="image/img_submain.png" alt="" />
                </div>
              </li>
              <li class="seep-next">
                <div class="yafit-info">
                  <div class="circle-wrap">
                    <div class="black-circle">
                      <p>야핏 사이클 회원 중 매일 <br />운동하는 비율</p>
                      <p><strong> 70.2</strong></p>
                      <p>
                        <span>11/1 ~ 11/30 누적 설치 수 대비 DAU 기준</span>
                      </p>
                    </div>
                    <div class="green-circle">
                      <p>
                        우리나라 국민 중<br />
                        매일 운동하는 비율
                      </p>
                      <p><strong>4.6</strong></p>
                      <p>
                        <span
                          >문화체육관광부<br />'2012국민생활체육<br />참여실체조사'</span
                        >
                      </p>
                    </div>
                  </div>
                </div>
              </li>
              <li>
                <div class="yafit-live">
                  <div class="video-box">
                    <h2>당신은 이제 매일 이 사이클에<br />앉게 될 겁니다</h2>
                    <p>
                      동기부여 3단계를 바탕으로 설계 돼<br />2시간이 훌쩍
                      지나버리는 꿀잼 가상 라이딩
                    </p>
                    <video
                      class="riding-video"
                      tabindex="-1"
                      loop=""
                      muted="muted"
                      playsinline="playsinline"
                      autostart="false"
                      autoplay=""
                    >
                      <source src="image/media_riding.mp4" type="video/mp4" />
                    </video>
                  </div>
                </div>
                <div class="yafit-live">
                  <div class="img-box">
                    <h2>
                      수백명이 함께 달리는 신개념 홈 트레이닝<br /><em
                        >야핏 사이클</em
                      >
                    </h2>
                    <p>
                      와디즈 오픈 40분만에 1억 펀딩 돌파!<br />그랜드 슬램 달성
                    </p>
                    <img src="image/bg_special_benefit_content.png" alt="" />
                  </div>
                </div>
              </li>
              <li>
                <div class="yafit-change">
                  <div class="change-step">
                    <img
                      src="image/img_target_title.png"
                      style="margin-top: 3em"
                      alt=""
                    />
                  </div>
                  <div class="change-step">
                    <img src="image/img_tit_step_v2.png" alt="" />
                  </div>
                  <div class="change-step">
                    <img
                      src="image/img_expectation_comment.png"
                      style="width: 520px"
                      alt=""
                    />
                  </div>
                </div>
                <div class="end-box"></div>
              </li>
            </ul>
          </div>
          <div class="load">
            <span class="cycle-move" id="yafitCycle">0%</span>
            <em>마우스 휠을 움직여 사이클을 움직여 보세요</em>
          </div>
        </div>
      </section>
    </div>
    <script>
      let delayChk = false;
      let intro = document.getElementById('intro');
      let english = document.getElementById('english');
      let oneTimeItem = document.querySelectorAll('.one-time');
      let yafit = document.getElementById('yafit');
      let scaleScreen = document.getElementById('scaleScreen');

      function scrollCheck() {
        let positionIndex = window.pageYOffset,
          sectionPoint = document.querySelectorAll('.motion-screen');

        for (let i = 0; i < sectionPoint.length > 0; i++) {
          if (
            0 >= sectionPoint[i].getBoundingClientRect().top &&
            sectionPoint[i].getBoundingClientRect().top >
              sectionPoint[i].offsetHeight * -1
          ) {
            // i번째 요소와의 거리가 0보다 작고, ( i번째 요소의 높이 * -1 )보다 크다면 'active' 클래스를 부여한다.
            sectionPoint[i].classList.add('active');

            if (sectionPoint[i].className.indexOf('type-fixed') != -1) {
              // 만약 해당 섹션에 'type-fixed' 클래스가 존재한다면(hasClass) body 요소에 'lock' 클래스 추가와 해당 섹션에 'fixed-mode' 클래스를 추가 시킨다.
              if (
                0 >=
                sectionPoint[i].offsetHeight -
                  window.innerHeight +
                  sectionPoint[i].getBoundingClientRect().top
              ) {
                // 섹션 끝지점에서 position:absolute; bottom:0; 처리하여 다음 섹션으로 넘어갈때 자연스럽게
                sectionPoint[i].classList.add('absolute');
              } else {
                sectionPoint[i].classList.remove('absolute');
              }
            }
          } else {
            sectionPoint[i].classList.remove('active');
          }
        }

        if (positionIndex <= 0) {
          for (let i = 0; i < oneTimeItem.length; i++) {
            oneTimeItem[i].classList.remove('begin');
          }
        }
      }

      function scrollDelay(sec) {
        delayChk = false;
        document.querySelector('body').classList.add('lock');
        setTimeout(function () {
          document.querySelector('body').classList.remove('lock');
        }, sec * 1000);
      }

      let checkCheck = false;

      window.addEventListener('scroll', function () {
        scrollCheck();
        if (checkCheck) {
          randomPang();
          checkCheck = false;
        }
        // intro
        if (intro.className.indexOf('active') != -1) {
          if (intro.getBoundingClientRect().top < -100) {
            intro.classList.add('step1');
            if (delayChk) {
              scrollDelay(3);
              setTimeout(function () {
                english.scrollIntoView({ behavior: 'smooth' });
              }, 3100);
            }
          } else {
            intro.classList.remove('step1');
            delayChk = true;
          }
        }

        // english
        if (english.className.indexOf('active') != -1) {
          let value = english.getBoundingClientRect().top * -1;

          let neverGiveUp = document.getElementById('neverGiveUp');
          let neverGiveUpTitle = document.getElementById('neverGiveUpTitle');
          let neverGiveUpHenry = document.getElementById('neverGiveUpHenry');
          neverGiveUpTitle.classList.add('begin');
          neverGiveUpHenry.classList.add('begin');
          neverGiveUpTitle.style.left = value + 'px';
          neverGiveUpHenry.style.left = value * -1 + 'px';
          neverGiveUp.style.backgroundPositionY = value * 0.2 + 'px';

          let milchak = document.getElementById('milchak');
          let milchakTitle = document.getElementById('milchakTitle');
          let milchakHenry = document.getElementById('milchakHenry');
          let milchakValue =
            value - neverGiveUp.offsetHeight + window.innerHeight / 3;
          let milchakTitleValue = milchakValue * 0.3 - 100;
          let milchakHenryValue = milchakValue * -0.3 + 100;
          if (milchakTitleValue > 0) milchakTitleValue = 0;
          if (milchakHenryValue < 0) milchakHenryValue = 0;
          milchakTitle.style.left = milchakTitleValue + '%';
          milchakHenry.style.left = milchakHenryValue + '%';

          let audio = document.getElementById('audio');
          let audioImg = document.getElementById('audioImg');
          let audioEffectBg = document.getElementById('audioEffectBg');
          let audioValue =
            (value -
              neverGiveUp.offsetHeight -
              milchak.offsetHeight +
              window.innerHeight / 5) *
            0.2;
          if (audioValue > 0) audioValue = 0;
          audioImg.style.top = audioValue + '%';
          audioEffectBg.style.cssText =
            'transform:scale(' + (audioValue * -0.05 + 1) + ');';

          let cheerupBg = document.getElementById('cheerupBg');
          let cheerupTitle = document.getElementById('cheerupTitle');
          let cheerupValue =
            value -
            neverGiveUp.offsetHeight -
            milchak.offsetHeight -
            audio.offsetHeight +
            window.innerHeight / 3;
          let cheerupScale = 4 - cheerupValue * 0.02;
          if (cheerupScale <= 1) cheerupScale = 1;
          cheerupBg.style.backgroundPositionY = value * -0.2 + 'px';
          cheerupTitle.style.cssText =
            'transform:scale(' +
            cheerupScale +
            '); opacity:' +
            cheerupValue +
            '%;';
        }

        // yafit
        if (yafit.className.indexOf('active') != -1) {
          let yafitCycle = document.getElementById('yafitCycle');
          let yafitValue =
            ((yafit.getBoundingClientRect().top * -1) / yafit.offsetHeight) *
            100;
          let yafitItem = scaleScreen.querySelectorAll('li');
          let yafitScrollValue = yafit.getBoundingClientRect().top * -1;
          if (yafitValue <= 0) {
            yafitValue = 0;
          } else if (yafitValue >= 90) {
            yafitValue = 100;
            yafitCycle.classList.add('finish');
          } else {
            yafitCycle.classList.remove('finish');
          }

          yafitCycle.innerHTML = Math.floor(yafitValue * 10) / 10 + 'km';
          yafitCycle.style.left = yafitValue + '%';

          // 유지보수하기 편하도록 스크립트 개선 필요

          if (yafitScrollValue > 15000) {
            for (let i = 0; i < yafitItem.length; i++) {
              yafitItem[i].classList.remove('step-prev');
              yafitItem[i].classList.remove('step-active');
              yafitItem[i].classList.remove('step-next');
            }
            scaleScreen.querySelectorAll('li')[2].classList.add('step-prev');
            scaleScreen.querySelectorAll('li')[3].classList.add('step-active');

            if (yafitScrollValue > 18500) {
              scaleScreen
                .querySelectorAll('.change-step')[0]
                .classList.remove('motion-on');
              scaleScreen
                .querySelectorAll('.change-step')[1]
                .classList.remove('motion-on');
              scaleScreen
                .querySelectorAll('.change-step')[2]
                .classList.remove('motion-on');
              scaleScreen
                .querySelectorAll('.yafit-change')[0]
                .classList.add('motion-end');
            } else if (yafitScrollValue > 17500) {
              scaleScreen
                .querySelectorAll('.change-step')[0]
                .classList.remove('motion-on');
              scaleScreen
                .querySelectorAll('.change-step')[1]
                .classList.remove('motion-on');
              scaleScreen
                .querySelectorAll('.change-step')[2]
                .classList.add('motion-on');
              scaleScreen
                .querySelectorAll('.yafit-change')[0]
                .classList.remove('motion-end');
            } else if (yafitScrollValue > 16500) {
              scaleScreen
                .querySelectorAll('.change-step')[0]
                .classList.remove('motion-on');
              scaleScreen
                .querySelectorAll('.change-step')[1]
                .classList.add('motion-on');
              scaleScreen
                .querySelectorAll('.change-step')[2]
                .classList.remove('motion-on');
              scaleScreen
                .querySelectorAll('.yafit-change')[0]
                .classList.remove('motion-end');
            } else if (yafitScrollValue > 15500) {
              scaleScreen
                .querySelectorAll('.change-step')[0]
                .classList.add('motion-on');
              scaleScreen
                .querySelectorAll('.change-step')[1]
                .classList.remove('motion-on');
              scaleScreen
                .querySelectorAll('.change-step')[2]
                .classList.remove('motion-on');
              scaleScreen
                .querySelectorAll('.yafit-change')[0]
                .classList.remove('motion-end');
            } else {
              scaleScreen
                .querySelectorAll('.change-step')[0]
                .classList.remove('motion-on');
              scaleScreen
                .querySelectorAll('.change-step')[1]
                .classList.remove('motion-on');
              scaleScreen
                .querySelectorAll('.change-step')[2]
                .classList.remove('motion-on');
              scaleScreen
                .querySelectorAll('.yafit-change')[0]
                .classList.remove('motion-end');
            }
          } else if (yafitScrollValue > 10000) {
            for (let i = 0; i < yafitItem.length; i++) {
              yafitItem[i].classList.remove('step-prev');
              yafitItem[i].classList.remove('step-active');
              yafitItem[i].classList.remove('step-next');
            }
            yafitItem[1].classList.add('step-prev');
            yafitItem[2].classList.add('step-active');
            yafitItem[3].classList.add('step-next');
            if (yafitScrollValue > 12500) {
              scaleScreen
                .querySelectorAll('.yafit-live')[1]
                .classList.add('motion-on');
              scaleScreen
                .querySelectorAll('.yafit-live')[0]
                .classList.remove('motion-on');
            } else if (yafitScrollValue > 10500) {
              scaleScreen
                .querySelectorAll('.yafit-live')[0]
                .classList.add('motion-on');
              scaleScreen
                .querySelectorAll('.yafit-live')[1]
                .classList.remove('motion-on');
            } else {
              scaleScreen
                .querySelectorAll('.yafit-live')[0]
                .classList.remove('motion-on');
              scaleScreen
                .querySelectorAll('.yafit-live')[1]
                .classList.remove('motion-on');
            }
          } else if (yafitScrollValue > 5000) {
            for (let i = 0; i < yafitItem.length; i++) {
              yafitItem[i].classList.remove('step-prev');
              yafitItem[i].classList.remove('step-active');
              yafitItem[i].classList.remove('step-next');
            }
            yafitItem[0].classList.add('step-prev');
            yafitItem[1].classList.add('step-active');
            yafitItem[2].classList.add('step-next');

            yafitScrollValue > 7500
              ? scaleScreen
                  .querySelectorAll('.black-circle')[0]
                  .classList.add('motion-on')
              : scaleScreen
                  .querySelectorAll('.black-circle')[0]
                  .classList.remove('motion-on');
            yafitScrollValue > 8000
              ? scaleScreen
                  .querySelectorAll('.green-circle')[0]
                  .classList.add('motion-on')
              : scaleScreen
                  .querySelectorAll('.green-circle')[0]
                  .classList.remove('motion-on');
          } else if (yafitScrollValue >= 0) {
            for (let i = 0; i < yafitItem.length; i++) {
              yafitItem[i].classList.remove('step-prev');
              yafitItem[i].classList.remove('step-active');
              yafitItem[i].classList.remove('step-next');
            }
            yafitItem[0].classList.add('step-active');
            yafitItem[1].classList.add('step-next');

            yafitScrollValue > 2000
              ? scaleScreen
                  .querySelectorAll('.yafit-intro')[0]
                  .classList.add('next-scene')
              : scaleScreen
                  .querySelectorAll('.yafit-intro')[0]
                  .classList.remove('next-scene');
          }
        }
      });

      document.addEventListener('DOMContentLoaded', function () {
        yafit.style.height = 20000 + 'px';
      });
    </script>
  </body>
</html>
